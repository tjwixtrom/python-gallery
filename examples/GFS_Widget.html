

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Jupyter Notebook Widget Example &mdash; Unidata Python Gallery</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/gallery.css" type="text/css" />
  
    <link rel="stylesheet" href="../_static/theme_override.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="Unidata Python Gallery" href="../index.html"/>
        <link rel="up" title="Unidata Python Gallery" href="index.html"/>
        <link rel="next" title="WV Satellite Overlay Example" href="Satellite_Example.html"/>
        <link rel="prev" title="A 250-hPa Hemispheric Map using Python" href="250hPa_Hemispheric_Plot.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Unidata Python Gallery
          

          
            
            <img src="../_static/Unidata_logo_vertical_400x400.png" class="logo" />
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Unidata Python Gallery</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="xarray_500hPa_map.html">Using Xarray for Data read and selection</a></li>
<li class="toctree-l2"><a class="reference internal" href="Meteogram.html">Surface Meteogram</a></li>
<li class="toctree-l2"><a class="reference internal" href="Smoothing_Contours.html">Smoothing Contours</a></li>
<li class="toctree-l2"><a class="reference internal" href="250hPa_Hemispheric_Plot.html">A 250-hPa Hemispheric Map using Python</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Jupyter Notebook Widget Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="Satellite_Example.html">WV Satellite Overlay Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="Wind_Shear_Vectors_Example.html">Calculating Wind Shear</a></li>
<li class="toctree-l2"><a class="reference internal" href="500hPa_Vorticity_Advection.html">500 hPa Vorticity Advection</a></li>
<li class="toctree-l2"><a class="reference internal" href="Ageostrophic_Wind_Example.html">Geostrophic and Ageostrophic Wind</a></li>
<li class="toctree-l2"><a class="reference internal" href="850hPa_Temperature_Advection.html">850 hPa Temperature Advection</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../metpy_mondays/index.html">MetPy Mondays</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Unidata Python Gallery</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Unidata Python Gallery</a> &raquo;</li>
        
      <li>Jupyter Notebook Widget Example</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/examples/GFS_Widget.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="jupyter-notebook-widget-example">
<span id="sphx-glr-examples-gfs-widget-py"></span><h1>Jupyter Notebook Widget Example<a class="headerlink" href="#jupyter-notebook-widget-example" title="Permalink to this headline">Â¶</a></h1>
<p>An example of using widgets in a Jupyter Notebook.</p>
<p>This example is only intended to be run in a Jupyter Notebook running a Python
kernel as it displays the ability to use widgets and make an interactive plot.
The interactive plot has the ability to display three different variables, a couple
of different times, and use four different color maps.</p>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-default"><div class="highlight"><pre><span></span>{&#39;OPENDAP&#39;: &#39;http://thredds.ucar.edu/thredds/dodsC/grib/NCEP/GFS/Global_0p5deg/Best&#39;, &#39;WCS&#39;: &#39;http://thredds.ucar.edu/thredds/wcs/grib/NCEP/GFS/Global_0p5deg/Best&#39;, &#39;WMS&#39;: &#39;http://thredds.ucar.edu/thredds/wms/grib/NCEP/GFS/Global_0p5deg/Best&#39;, &#39;NetcdfSubset&#39;: &#39;http://thredds.ucar.edu/thredds/ncss/grib/NCEP/GFS/Global_0p5deg/Best&#39;, &#39;CdmRemote&#39;: &#39;http://thredds.ucar.edu/thredds/cdmremote/grib/NCEP/GFS/Global_0p5deg/Best&#39;, &#39;NCML&#39;: &#39;http://thredds.ucar.edu/thredds/ncml/grib/NCEP/GFS/Global_0p5deg/Best&#39;, &#39;UDDC&#39;: &#39;http://thredds.ucar.edu/thredds/uddc/grib/NCEP/GFS/Global_0p5deg/Best&#39;, &#39;ISO&#39;: &#39;http://thredds.ucar.edu/thredds/iso/grib/NCEP/GFS/Global_0p5deg/Best&#39;}
[&#39;Relative_humidity_entire_atmosphere_single_layer&#39;, &#39;reftime1&#39;, &#39;time1&#39;, &#39;lat&#39;, &#39;lon&#39;, &#39;Temperature_surface&#39;, &#39;Wind_speed_gust_surface&#39;]
[0;31m[0m
[0;31mSphinxWarning[0mTraceback (most recent call last)
[0;32m/home/travis/miniconda/envs/gallery/lib/python3.6/site-packages/IPython/core/formatters.py[0m in [0;36m__call__[0;34m(self, obj)[0m
[1;32m    874[0m             [0mmethod[0m [0;34m=[0m [0mget_real_method[0m[0;34m([0m[0mobj[0m[0;34m,[0m [0mself[0m[0;34m.[0m[0mprint_method[0m[0;34m)[0m[0;34m[0m[0m
[1;32m    875[0m             [0;32mif[0m [0mmethod[0m [0;32mis[0m [0;32mnot[0m [0;32mNone[0m[0;34m:[0m[0;34m[0m[0m
[0;32m--&gt; 876[0;31m                 [0mmethod[0m[0;34m([0m[0;34m)[0m[0;34m[0m[0m
[0m[1;32m    877[0m                 [0;32mreturn[0m [0;32mTrue[0m[0;34m[0m[0m
[1;32m    878[0m [0;34m[0m[0m

[0;32m/home/travis/miniconda/envs/gallery/lib/python3.6/site-packages/ipywidgets/widgets/widget.py[0m in [0;36m_ipython_display_[0;34m(self, **kwargs)[0m
[1;32m    502[0m             [0;31m# widget front-end is what is expected.[0m[0;34m[0m[0;34m[0m[0m
[1;32m    503[0m             [0;32mif[0m [0mvalidated[0m [0;32mis[0m [0;32mNone[0m[0;34m:[0m[0;34m[0m[0m
[0;32m--&gt; 504[0;31m                 loud_error(&#39;Widget Javascript not detected.  It may not be &#39;
[0m[1;32m    505[0m                            &#39;installed or enabled properly.&#39;)
[1;32m    506[0m             [0;32melif[0m [0;32mnot[0m [0mvalidated[0m[0;34m:[0m[0;34m[0m[0m

[0;32m/home/travis/miniconda/envs/gallery/lib/python3.6/site-packages/ipywidgets/widgets/widget.py[0m in [0;36mloud_error[0;34m(message)[0m
[1;32m    492[0m         [0;34m&quot;&quot;&quot;Called when `IPython.display.display` is called on the widget.&quot;&quot;&quot;[0m[0;34m[0m[0m
[1;32m    493[0m         [0;32mdef[0m [0mloud_error[0m[0;34m([0m[0mmessage[0m[0;34m)[0m[0;34m:[0m[0;34m[0m[0m
[0;32m--&gt; 494[0;31m             [0mself[0m[0;34m.[0m[0mlog[0m[0;34m.[0m[0mwarn[0m[0;34m([0m[0mmessage[0m[0;34m)[0m[0;34m[0m[0m
[0m[1;32m    495[0m             [0msys[0m[0;34m.[0m[0mstderr[0m[0;34m.[0m[0mwrite[0m[0;34m([0m[0;34m&#39;%s\n&#39;[0m [0;34m%[0m [0mmessage[0m[0;34m)[0m[0;34m[0m[0m
[1;32m    496[0m [0;34m[0m[0m

[0;32m/home/travis/miniconda/envs/gallery/lib/python3.6/logging/__init__.py[0m in [0;36mwarn[0;34m(self, msg, *args, **kwargs)[0m
[1;32m   1321[0m         warnings.warn(&quot;The &#39;warn&#39; method is deprecated, &quot;
[1;32m   1322[0m             &quot;use &#39;warning&#39; instead&quot;, DeprecationWarning, 2)
[0;32m-&gt; 1323[0;31m         [0mself[0m[0;34m.[0m[0mwarning[0m[0;34m([0m[0mmsg[0m[0;34m,[0m [0;34m*[0m[0margs[0m[0;34m,[0m [0;34m**[0m[0mkwargs[0m[0;34m)[0m[0;34m[0m[0m
[0m[1;32m   1324[0m [0;34m[0m[0m
[1;32m   1325[0m     [0;32mdef[0m [0merror[0m[0;34m([0m[0mself[0m[0;34m,[0m [0mmsg[0m[0;34m,[0m [0;34m*[0m[0margs[0m[0;34m,[0m [0;34m**[0m[0mkwargs[0m[0;34m)[0m[0;34m:[0m[0;34m[0m[0m

[0;32m/home/travis/miniconda/envs/gallery/lib/python3.6/logging/__init__.py[0m in [0;36mwarning[0;34m(self, msg, *args, **kwargs)[0m
[1;32m   1316[0m         &quot;&quot;&quot;
[1;32m   1317[0m         [0;32mif[0m [0mself[0m[0;34m.[0m[0misEnabledFor[0m[0;34m([0m[0mWARNING[0m[0;34m)[0m[0;34m:[0m[0;34m[0m[0m
[0;32m-&gt; 1318[0;31m             [0mself[0m[0;34m.[0m[0m_log[0m[0;34m([0m[0mWARNING[0m[0;34m,[0m [0mmsg[0m[0;34m,[0m [0margs[0m[0;34m,[0m [0;34m**[0m[0mkwargs[0m[0;34m)[0m[0;34m[0m[0m
[0m[1;32m   1319[0m [0;34m[0m[0m
[1;32m   1320[0m     [0;32mdef[0m [0mwarn[0m[0;34m([0m[0mself[0m[0;34m,[0m [0mmsg[0m[0;34m,[0m [0;34m*[0m[0margs[0m[0;34m,[0m [0;34m**[0m[0mkwargs[0m[0;34m)[0m[0;34m:[0m[0;34m[0m[0m

[0;32m/home/travis/miniconda/envs/gallery/lib/python3.6/logging/__init__.py[0m in [0;36m_log[0;34m(self, level, msg, args, exc_info, extra, stack_info)[0m
[1;32m   1440[0m         record = self.makeRecord(self.name, level, fn, lno, msg, args,
[1;32m   1441[0m                                  exc_info, func, extra, sinfo)
[0;32m-&gt; 1442[0;31m         [0mself[0m[0;34m.[0m[0mhandle[0m[0;34m([0m[0mrecord[0m[0;34m)[0m[0;34m[0m[0m
[0m[1;32m   1443[0m [0;34m[0m[0m
[1;32m   1444[0m     [0;32mdef[0m [0mhandle[0m[0;34m([0m[0mself[0m[0;34m,[0m [0mrecord[0m[0;34m)[0m[0;34m:[0m[0;34m[0m[0m

[0;32m/home/travis/miniconda/envs/gallery/lib/python3.6/logging/__init__.py[0m in [0;36mhandle[0;34m(self, record)[0m
[1;32m   1450[0m         &quot;&quot;&quot;
[1;32m   1451[0m         [0;32mif[0m [0;34m([0m[0;32mnot[0m [0mself[0m[0;34m.[0m[0mdisabled[0m[0;34m)[0m [0;32mand[0m [0mself[0m[0;34m.[0m[0mfilter[0m[0;34m([0m[0mrecord[0m[0;34m)[0m[0;34m:[0m[0;34m[0m[0m
[0;32m-&gt; 1452[0;31m             [0mself[0m[0;34m.[0m[0mcallHandlers[0m[0;34m([0m[0mrecord[0m[0;34m)[0m[0;34m[0m[0m
[0m[1;32m   1453[0m [0;34m[0m[0m
[1;32m   1454[0m     [0;32mdef[0m [0maddHandler[0m[0;34m([0m[0mself[0m[0;34m,[0m [0mhdlr[0m[0;34m)[0m[0;34m:[0m[0;34m[0m[0m

[0;32m/home/travis/miniconda/envs/gallery/lib/python3.6/logging/__init__.py[0m in [0;36mcallHandlers[0;34m(self, record)[0m
[1;32m   1512[0m                 [0mfound[0m [0;34m=[0m [0mfound[0m [0;34m+[0m [0;36m1[0m[0;34m[0m[0m
[1;32m   1513[0m                 [0;32mif[0m [0mrecord[0m[0;34m.[0m[0mlevelno[0m [0;34m&gt;=[0m [0mhdlr[0m[0;34m.[0m[0mlevel[0m[0;34m:[0m[0;34m[0m[0m
[0;32m-&gt; 1514[0;31m                     [0mhdlr[0m[0;34m.[0m[0mhandle[0m[0;34m([0m[0mrecord[0m[0;34m)[0m[0;34m[0m[0m
[0m[1;32m   1515[0m             [0;32mif[0m [0;32mnot[0m [0mc[0m[0;34m.[0m[0mpropagate[0m[0;34m:[0m[0;34m[0m[0m
[1;32m   1516[0m                 [0mc[0m [0;34m=[0m [0;32mNone[0m    [0;31m#break out[0m[0;34m[0m[0m

[0;32m/home/travis/miniconda/envs/gallery/lib/python3.6/logging/__init__.py[0m in [0;36mhandle[0;34m(self, record)[0m
[1;32m    857[0m         [0memission[0m[0;34m.[0m[0;34m[0m[0m
[1;32m    858[0m         &quot;&quot;&quot;
[0;32m--&gt; 859[0;31m         [0mrv[0m [0;34m=[0m [0mself[0m[0;34m.[0m[0mfilter[0m[0;34m([0m[0mrecord[0m[0;34m)[0m[0;34m[0m[0m
[0m[1;32m    860[0m         [0;32mif[0m [0mrv[0m[0;34m:[0m[0;34m[0m[0m
[1;32m    861[0m             [0mself[0m[0;34m.[0m[0macquire[0m[0;34m([0m[0;34m)[0m[0;34m[0m[0m

[0;32m/home/travis/miniconda/envs/gallery/lib/python3.6/logging/__init__.py[0m in [0;36mfilter[0;34m(self, record)[0m
[1;32m    716[0m         [0;32mfor[0m [0mf[0m [0;32min[0m [0mself[0m[0;34m.[0m[0mfilters[0m[0;34m:[0m[0;34m[0m[0m
[1;32m    717[0m             [0;32mif[0m [0mhasattr[0m[0;34m([0m[0mf[0m[0;34m,[0m [0;34m&#39;filter&#39;[0m[0;34m)[0m[0;34m:[0m[0;34m[0m[0m
[0;32m--&gt; 718[0;31m                 [0mresult[0m [0;34m=[0m [0mf[0m[0;34m.[0m[0mfilter[0m[0;34m([0m[0mrecord[0m[0;34m)[0m[0;34m[0m[0m
[0m[1;32m    719[0m             [0;32melse[0m[0;34m:[0m[0;34m[0m[0m
[1;32m    720[0m                 [0mresult[0m [0;34m=[0m [0mf[0m[0;34m([0m[0mrecord[0m[0;34m)[0m [0;31m# assume callable - will raise if not[0m[0;34m[0m[0m

[0;32m/home/travis/miniconda/envs/gallery/lib/python3.6/site-packages/sphinx/util/logging.py[0m in [0;36mfilter[0;34m(self, record)[0m
[1;32m    335[0m                 [0;32mraise[0m [0mSphinxWarning[0m[0;34m([0m[0mlocation[0m [0;34m+[0m [0;34m&quot;:&quot;[0m [0;34m+[0m [0mrecord[0m[0;34m.[0m[0mmsg[0m [0;34m%[0m [0mrecord[0m[0;34m.[0m[0margs[0m[0;34m)[0m[0;34m[0m[0m
[1;32m    336[0m             [0;32melse[0m[0;34m:[0m[0;34m[0m[0m
[0;32m--&gt; 337[0;31m                 [0;32mraise[0m [0mSphinxWarning[0m[0;34m([0m[0mrecord[0m[0;34m.[0m[0mmsg[0m [0;34m%[0m [0mrecord[0m[0;34m.[0m[0margs[0m[0;34m)[0m[0;34m[0m[0m
[0m[1;32m    338[0m         [0;32melse[0m[0;34m:[0m[0;34m[0m[0m
[1;32m    339[0m             [0;32mreturn[0m [0;32mTrue[0m[0;34m[0m[0m

[0;31mSphinxWarning[0m: Widget Javascript not detected.  It may not be installed or enabled properly.
&lt;ipywidgets.widgets.interaction.interactive at 0x2ade93294860&gt;
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span><span class="p">,</span> <span class="n">timedelta</span>

<span class="kn">import</span> <span class="nn">cartopy.crs</span> <span class="kn">as</span> <span class="nn">ccrs</span>
<span class="kn">import</span> <span class="nn">cartopy.feature</span> <span class="kn">as</span> <span class="nn">cfeature</span>
<span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">display</span>
<span class="kn">import</span> <span class="nn">ipywidgets</span> <span class="kn">as</span> <span class="nn">widgets</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">metpy.units</span> <span class="kn">import</span> <span class="n">units</span>
<span class="kn">from</span> <span class="nn">netCDF4</span> <span class="kn">import</span> <span class="n">num2date</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">siphon.catalog</span> <span class="kn">import</span> <span class="n">TDSCatalog</span>
<span class="kn">from</span> <span class="nn">siphon.ncss</span> <span class="kn">import</span> <span class="n">NCSS</span>


<span class="c1"># Request the GFS data from the thredds server</span>
<span class="n">gfs</span> <span class="o">=</span> <span class="n">TDSCatalog</span><span class="p">(</span><span class="s1">&#39;http://thredds.ucar.edu/thredds/catalog/grib/&#39;</span>
                 <span class="s1">&#39;NCEP/GFS/Global_0p5deg/catalog.xml&#39;</span><span class="p">)</span>
<span class="n">dataset</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">gfs</span><span class="o">.</span><span class="n">datasets</span><span class="o">.</span><span class="n">values</span><span class="p">())[</span><span class="mi">1</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">access_urls</span><span class="p">)</span>

<span class="c1"># Create NCSS object to access the NetcdfSubset</span>
<span class="n">ncss</span> <span class="o">=</span> <span class="n">NCSS</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">access_urls</span><span class="p">[</span><span class="s1">&#39;NetcdfSubset&#39;</span><span class="p">])</span>

<span class="c1"># get current date and time</span>
<span class="n">now</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">utcnow</span><span class="p">()</span>
<span class="n">now</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">(</span><span class="n">now</span><span class="o">.</span><span class="n">year</span><span class="p">,</span> <span class="n">now</span><span class="o">.</span><span class="n">month</span><span class="p">,</span> <span class="n">now</span><span class="o">.</span><span class="n">day</span><span class="p">,</span> <span class="n">now</span><span class="o">.</span><span class="n">hour</span><span class="p">)</span>

<span class="c1"># define time range you want the data for</span>
<span class="n">start</span> <span class="o">=</span> <span class="n">now</span>
<span class="n">end</span> <span class="o">=</span> <span class="n">now</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">hours</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>

<span class="n">query</span> <span class="o">=</span> <span class="n">ncss</span><span class="o">.</span><span class="n">query</span><span class="p">()</span>
<span class="n">query</span><span class="o">.</span><span class="n">time_range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">)</span>
<span class="n">query</span><span class="o">.</span><span class="n">lonlat_box</span><span class="p">(</span><span class="n">north</span><span class="o">=</span><span class="mi">60</span><span class="p">,</span> <span class="n">south</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">east</span><span class="o">=</span><span class="mi">310</span><span class="p">,</span> <span class="n">west</span><span class="o">=</span><span class="mi">230</span><span class="p">)</span>
<span class="n">query</span><span class="o">.</span><span class="n">accept</span><span class="p">(</span><span class="s1">&#39;netcdf4&#39;</span><span class="p">)</span>
<span class="n">query</span><span class="o">.</span><span class="n">variables</span><span class="p">(</span><span class="s1">&#39;Temperature_surface&#39;</span><span class="p">,</span> <span class="s1">&#39;Relative_humidity_entire_atmosphere_single_layer&#39;</span><span class="p">,</span>
                <span class="s1">&#39;Wind_speed_gust_surface&#39;</span><span class="p">)</span>


<span class="c1"># Helper function for finding proper time variable</span>
<span class="k">def</span> <span class="nf">find_time_var</span><span class="p">(</span><span class="n">var</span><span class="p">,</span> <span class="n">time_basename</span><span class="o">=</span><span class="s1">&#39;time&#39;</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">coord_name</span> <span class="ow">in</span> <span class="n">var</span><span class="o">.</span><span class="n">coordinates</span><span class="o">.</span><span class="n">split</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">coord_name</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">time_basename</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">coord_name</span>
    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;No time variable found for &#39;</span> <span class="o">+</span> <span class="n">var</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>


<span class="c1"># Request data for the variables you want to use</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">ncss</span><span class="o">.</span><span class="n">get_data</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">variables</span><span class="p">))</span>

<span class="c1"># Pull out the lat and lon data</span>
<span class="n">lat</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">variables</span><span class="p">[</span><span class="s1">&#39;lat&#39;</span><span class="p">][:]</span>
<span class="n">lon</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">variables</span><span class="p">[</span><span class="s1">&#39;lon&#39;</span><span class="p">][:]</span>

<span class="c1"># Get time into a datetime object</span>
<span class="n">time_var</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">variables</span><span class="p">[</span><span class="n">find_time_var</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">variables</span><span class="p">[</span><span class="s1">&#39;Temperature_surface&#39;</span><span class="p">])]</span>
<span class="n">time_var</span> <span class="o">=</span> <span class="n">num2date</span><span class="p">(</span><span class="n">time_var</span><span class="p">[:],</span> <span class="n">time_var</span><span class="o">.</span><span class="n">units</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="n">time_strings</span> <span class="o">=</span> <span class="p">[</span><span class="n">t</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%m/</span><span class="si">%d</span><span class="s1"> %H:%M&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">time_var</span><span class="p">]</span>

<span class="c1"># Combine 1D latitude and longitudes into a 2D grid of locations</span>
<span class="n">lon_2d</span><span class="p">,</span> <span class="n">lat_2d</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">meshgrid</span><span class="p">(</span><span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">plot</span><span class="p">(</span><span class="n">varname</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">time</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">colormap</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
    <span class="n">variable</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">variables</span><span class="p">[</span><span class="n">varname</span><span class="p">][:]</span>
    <span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">111</span><span class="p">,</span> <span class="n">projection</span><span class="o">=</span><span class="n">ccrs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">())</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_extent</span><span class="p">([</span><span class="mf">235.</span><span class="p">,</span> <span class="mf">290.</span><span class="p">,</span> <span class="mf">20.</span><span class="p">,</span> <span class="mf">55.</span><span class="p">])</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;GFS 12-Hour Forecast&#39;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>

    <span class="c1"># Add state boundaries to plot</span>
    <span class="n">states_provinces</span> <span class="o">=</span> <span class="n">cfeature</span><span class="o">.</span><span class="n">NaturalEarthFeature</span><span class="p">(</span><span class="n">category</span><span class="o">=</span><span class="s1">&#39;cultural&#39;</span><span class="p">,</span>
                                                    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;admin_1_states_provinces_lines&#39;</span><span class="p">,</span>
                                                    <span class="n">scale</span><span class="o">=</span><span class="s1">&#39;50m&#39;</span><span class="p">,</span> <span class="n">facecolor</span><span class="o">=</span><span class="s1">&#39;none&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">add_feature</span><span class="p">(</span><span class="n">states_provinces</span><span class="p">,</span> <span class="n">edgecolor</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

    <span class="c1"># Add country borders to plot</span>
    <span class="n">country_borders</span> <span class="o">=</span> <span class="n">cfeature</span><span class="o">.</span><span class="n">NaturalEarthFeature</span><span class="p">(</span><span class="n">category</span><span class="o">=</span><span class="s1">&#39;cultural&#39;</span><span class="p">,</span>
                                                   <span class="n">name</span><span class="o">=</span><span class="s1">&#39;admin_0_countries&#39;</span><span class="p">,</span>
                                                   <span class="n">scale</span><span class="o">=</span><span class="s1">&#39;50m&#39;</span><span class="p">,</span> <span class="n">facecolor</span><span class="o">=</span><span class="s1">&#39;none&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">add_feature</span><span class="p">(</span><span class="n">country_borders</span><span class="p">,</span> <span class="n">edgecolor</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">varname</span> <span class="o">==</span> <span class="s1">&#39;Temperature_surface&#39;</span><span class="p">:</span>
        <span class="n">variable</span> <span class="o">=</span> <span class="p">(</span><span class="n">variable</span> <span class="o">*</span> <span class="n">units</span><span class="o">.</span><span class="n">kelvin</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="s1">&#39;degF&#39;</span><span class="p">)</span>

    <span class="c1"># Contour based on variable chosen</span>
    <span class="n">c</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">contourf</span><span class="p">(</span><span class="n">lon_2d</span><span class="p">,</span> <span class="n">lat_2d</span><span class="p">,</span> <span class="n">variable</span><span class="p">[</span><span class="n">time_strings</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">time</span><span class="p">)],</span> <span class="n">cmap</span><span class="o">=</span><span class="n">colormap</span><span class="p">)</span>
    <span class="n">cb</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">shrink</span><span class="o">=</span><span class="mf">0.7</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">varname</span> <span class="o">==</span> <span class="s1">&#39;Temperature_surface&#39;</span><span class="p">:</span>
        <span class="n">cb</span><span class="o">.</span><span class="n">set_label</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;$^{o}F$&#39;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="s1">&#39;large&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">varname</span> <span class="o">==</span> <span class="s1">&#39;Relative_humidity_entire_atmosphere_single_layer&#39;</span><span class="p">:</span>
        <span class="n">cb</span><span class="o">.</span><span class="n">set_label</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;$\%$&#39;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="s1">&#39;large&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">varname</span> <span class="o">==</span> <span class="s1">&#39;Wind_speed_gust_surface&#39;</span><span class="p">:</span>
        <span class="n">cb</span><span class="o">.</span><span class="n">set_label</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;$m/s$&#39;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="s1">&#39;large&#39;</span><span class="p">)</span>


<span class="n">var_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Dropdown</span><span class="p">(</span>
    <span class="n">options</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;Temperature&#39;</span><span class="p">:</span> <span class="s1">&#39;Temperature_surface&#39;</span><span class="p">,</span>
             <span class="s1">&#39;Relative Humidity&#39;</span><span class="p">:</span> <span class="s1">&#39;Relative_humidity_entire_atmosphere_single_layer&#39;</span><span class="p">,</span>
             <span class="s1">&#39;Wind Speed&#39;</span><span class="p">:</span> <span class="s1">&#39;Wind_speed_gust_surface&#39;</span><span class="p">},</span>
    <span class="n">description</span><span class="o">=</span><span class="s1">&#39;Variable&#39;</span><span class="p">,</span> <span class="n">alignment</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">)</span>
<span class="n">time_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">SelectionSlider</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s1">&#39;Time&#39;</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="n">time_strings</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="s1">&#39;40%&#39;</span><span class="p">)</span>
<span class="n">colormap_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">RadioButtons</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s1">&#39;Colormap&#39;</span><span class="p">,</span>
                                       <span class="n">options</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;viridis&#39;</span><span class="p">,</span> <span class="s1">&#39;coolwarm&#39;</span><span class="p">,</span> <span class="s1">&#39;YlGnBu&#39;</span><span class="p">,</span> <span class="s1">&#39;RdPu&#39;</span><span class="p">])</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">interactive</span><span class="p">(</span><span class="n">plot</span><span class="p">,</span> <span class="n">varname</span><span class="o">=</span><span class="n">var_widget</span><span class="p">,</span> <span class="n">time</span><span class="o">=</span><span class="n">time_widget</span><span class="p">,</span> <span class="n">colormap</span><span class="o">=</span><span class="n">colormap_widget</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Total running time of the script:</strong> ( 0 minutes  1.485 seconds)</p>
<div class="sphx-glr-footer docutils container">
<div class="sphx-glr-download docutils container">
<a class="reference download internal" href="../_downloads/GFS_Widget.py" download=""><code class="xref download docutils literal"><span class="pre">Download</span> <span class="pre">Python</span> <span class="pre">source</span> <span class="pre">code:</span> <span class="pre">GFS_Widget.py</span></code></a></div>
<div class="sphx-glr-download docutils container">
<a class="reference download internal" href="../_downloads/GFS_Widget.ipynb" download=""><code class="xref download docutils literal"><span class="pre">Download</span> <span class="pre">Jupyter</span> <span class="pre">notebook:</span> <span class="pre">GFS_Widget.ipynb</span></code></a></div>
</div>
<p class="sphx-glr-signature"><a class="reference external" href="https://sphinx-gallery.readthedocs.io">Generated by Sphinx-Gallery</a></p>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="Satellite_Example.html" class="btn btn-neutral float-right" title="WV Satellite Overlay Example" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="250hPa_Hemispheric_Plot.html" class="btn btn-neutral" title="A 250-hPa Hemispheric Map using Python" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, UCAR/Unidata.
      Last updated on May 30, 2017 at 15:34:15.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-92978945-1', 'auto');
  ga('send', 'pageview');

</script>
<p>Do you find this gallery useful?
  <a href="https://saythanks.io/to/unidata" class="btn btn-neutral" title="Installation Guide" accesskey="n">Say Thanks!</a>
</p>
     


</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>